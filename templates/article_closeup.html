{% extends 'base.html' %}

{% block title %} 
  Article Closeup 
{% endblock %}

{% block page_specific_js %} 
<script src="/static/article_closeup.js"></script>        
{% endblock %}

{% block content %}
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
    {% endif %}
  {% endwith %}

  <form action="/user-articles/{{ article_object.user_id }}">
    <input type="submit" value="View your articles" />
  </form>

  <form action="/article-edit/{{ article_object.article_id }}">
    <input type="submit" value="Edit article" />
  </form>

  <form action="/delete-article/{{ article_object.article_id }}" method=["POST"]>
    <input type="submit" value="Delete article" />
  </form>

  <br><br>
    <h1>{{ article_object.article_title }}</h1>
  <br>

<h4>Tags: 
  <div id="tags">
  {% for tag in article_object.tags %}
  <form id="tag-id-{{ tag.tag_id }}" class="delete-tag">
    <input type="hidden" name="article_id" value="{{ article_object.article_id }}">
    <input type="hidden" name="tag_id" value="{{ tag.tag_id }}">
    <input type="submit" name="tag_value" value="{{ tag.tag_value }}">
  </form>
  {% endfor %}
</div>
</h4>


<button id="add-tags">Add Tag</button><br><br>

    <div id="add-tag-modal" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Add Tag</h4>
          </div>
          <div class="modal-body">
            <form id="add-tag-form">
          Tag Name: <input id="tag-field" type="text" name="tag-name">
                    <input type="hidden" name="article_id" id="article-id" value="{{ article_object.article_id }}">
        </form method="POST">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <input form="add-tag-form" id="tag-form-button" type="submit" class="btn btn-primary" value="Add Tag">
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


  {% if article_object.article_description %}
    Description: {{ article_object.article_description }}
    <br><br>
  {% endif %}

  Text: {{ article_object.article_text }} 
  <br><br>
  Read Status: {{ article_object.read_status }}
  <br><br>
  Added: {{ article_object.date_added.strftime('%m-%d-%Y') }}
  <br><br>

  {% if article_object.url_source %}
    URL Source: {{ article_object.url_source }}
    <br><br>
  {% endif %}

  {% if article_object.last_listened %}
    Last Listened: {{ article_object.last_listened.strftime('%m-%d-%Y %I:%M%p') }}
    <br><br>
  {% endif %}

  <form id="submit" method="GET" action="/read">

    Select a voice:
      <select name="voice" id="voice-id">
        {% for voice in all_voices %}
          {% if 'en' in voice["LanguageCode"] %}
            <option value="{{ voice['Name'] }}">{{ voice["Name"] }}</option>
          {% endif %}
        {% endfor %}
      </select>
    <input type="hidden" name="text" id="text" value="{{ article_object.article_text }}">
    <input type="hidden" name="article_id" id="article-id" value="{{ article_object.article_id }}">
    <input type="submit" value="Read text" id="submit_read_request" >
  </form>

<audio id="audio_controls" controls="controls" src="">
  Your browser does not support the <code>audio</code> element.
</audio>

{% endblock %}
             







